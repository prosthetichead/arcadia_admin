<!-- extend from base layout -->
{% extends "base.html" %}

{% block breadcrumb %}
     <ol class="breadcrumb ">
         <li><a href="/">Home</a></li>
         <li><a href="/platform">Platform</a></li>
         <li><a href="/platform/{{platform.id}}">{{platform.name}}</a></li>
         <li class="active">Edit Platform</li>
     </ol>
{% endblock %}

{% block content %}
<div class="container">

    <form class="form-horizontal" action="" method="post" name="platform" >
        {{ form.hidden_tag() }}

        <div class="row">
            <div class="col-sm-1">
            <div id="icon_image">  </div>
            <button id="set_icon_asset" type="button" class="btn btn-primary btn-xs" style="width: 64px" value="Upload">Set Icon</button>
        </div>

           <div class="col-sm-4"> <h3>Platform {{ platform.name }} </h3> </div>
            <div class="col-sm-4">
                            <div class="checkbox">

{% set f = form.active.process_data( platform.active ) %} {{ form.active() }} Platform Active

            </div> </div>
        </div>

        <div class="row">

        </div>

        <div class="col-sm-1">

        </div>


        <div class="form-group">
            <div class="col-sm-5">
                <label for="name" class="control-label">Platform Name</label>
                {% set f = form.name.process_data( platform.name ) %}
                {{ form.name(size=80, maxlength=255, class_='form-control' ) }}
            </div>
            <div class="col-sm-3">
                <label for="alias" class="control-label">Alias</label>
                {% set f = form.alias.process_data( platform.alias ) %} {{ form.alias(class_='form-control') }}
            </div>
        </div>

        <div class="form-group">
            <div class="col-sm-8">
                <label for="desc" class=" control-label">Description</label>
                {% set f = form.desc.process_data( platform.desc ) %} {{ form.desc(cols="80", rows="5", class_='form-control' ) }}
            </div>
        </div>


      <div class="form-group">
          <label for="rom_extension" class="col-sm-3 control-label">Rom File Extension</label>
          <div class="col-sm-5">
              {% set f = form.rom_extension.process_data( platform.extension ) %}{{ form.rom_extension(class_='form-control') }}
          </div>
      </div>
      <div class="form-group">
          <label for="emu_path" class="col-sm-3 control-label">Emulator Path</label>
          <div class="col-sm-5">
            {% set f = form.emu_path.process_data( platform.emu_path ) %}{{ form.emu_path(class_='form-control') }}
          </div>
      </div>
      <div class="form-group">
          <label for="roms_path" class="col-sm-3 control-label">Roms Path</label>
          <div class="col-sm-5">
            {% set f = form.roms_path.process_data( platform.roms_path ) %}{{ form.roms_path(class_='form-control') }}
          </div>
      </div>
      <div class="form-group">
          <label for="load_string" class="col-sm-3 control-label">Load String</label>
          <div class="col-sm-5">
            {% set f = form.load_string.process_data( platform.load_string ) %}{{ form.load_string(class_='form-control') }}
          </div>
      </div>
      <div class="form-group">
          <label for="videos_path" class="col-sm-3 control-label">Videos Path</label>
          <div class="col-sm-5">
            {% set f = form.videos_path.process_data( platform.videos_path ) %}{{ form.videos_path(class_='form-control') }}
          </div>
      </div>
      <div class="form-group">
          <label for="images_path" class="col-sm-3 control-label">Images Path</label>
          <div class="col-sm-5">
            {% set f = form.images_path.process_data( platform.images_path ) %}{{ form.images_path(class_='form-control') }}
          </div>
      </div>

          {% if form.errors %}
            <ul class="errors">
              {% for field_name, field_errors in form.errors|dictsort if field_errors %}
                {% for error in field_errors %}
                  <li>{{ form[field_name].label }}: {{ error }}</li>
                {% endfor %}
              {% endfor %}
            </ul>
          {% endif %}

      <div class="form-group">
        <div class="col-sm-offset-3 col-sm-5" style="text-align:right;">
            <input type="submit" name="btn" value="Save" class="btn btn-primary "> <a href='/platform' class="btn btn-danger">Cancel</a>
        </div>
      </div>

  </form>
</div>




<div class="modal fade" id="assets_image-dialog" tabindex="-1" role="dialog" aria-labelledby="assets_image-label" aria-hidden="true"  >
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="assets_image-label">Choose Icon</h4>
      </div>
      <div id="assets_image-body" class="modal-body">

        <div class="icon_grid_div">
            <ul id="assets_image-list">

            </ul>
        </div>

      </div>
    </div>
  </div>
</div>

{% endblock %}



{% block scripts %}
<script>

$(document).ready(function() {
    console.log('<img id="icon_img" src="/_assets/icons/' + $('#icon').val() + '"/>');
    if ( $('#icon').val() != "" )
        $('#icon_image').html('<img id="icon_img" src="/_assets/icons/' + $('#icon').val() + '"/>');
});

$('#icon').change(function(){
    if ( $('#icon').val() != "" )
        $('#icon_image').html('<img id="icon_img" src="/_assets/icons/' + $('#icon').val() + '"/>');
});

$("#set_icon_asset").click(function() {

    open_image_asset_modal('icons');

});


</script>
{% endblock %}